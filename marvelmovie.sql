-- Full Marvel Movie Database Rebuild SQL (Cleaned & Escaped)
SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";

DROP TABLE IF EXISTS `directors`;
CREATE TABLE `directors` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `bio` text NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Full insert of all directors referenced in 20 Marvel movies
INSERT INTO `directors` (`id`, `name`, `email`, `bio`) VALUES
(1, 'Jon Favreau', 'jon.favreau@marvel.com', 'Director of Iron Man and Iron Man 2.'),
(2, 'Kenneth Branagh', 'kenneth.branagh@marvel.com', 'Director of the first Thor movie.'),
(3, 'Joe Johnston', 'joe.johnston@marvel.com', 'Directed Captain America: The First Avenger.'),
(4, 'Joss Whedon', 'joss.whedon@marvel.com', 'Directed The Avengers and Age of Ultron.'),
(5, 'Anthony Russo, Joe Russo', 'russo.brothers@marvel.com', 'Directed multiple Captain America and Avengers films.'),
(6, 'Scott Derrickson', 'scott.derrickson@marvel.com', 'Director of Doctor Strange.'),
(7, 'Jon Watts', 'jon.watts@marvel.com', 'Director of the Spider-Man Homecoming trilogy.'),
(8, 'Shane Black', 'shane.black@marvel.com', 'Director of Iron Man 3.'),
(9, 'Alan Taylor', 'alan.taylor@marvel.com', 'Director of Thor: The Dark World.'),
(10, 'James Gunn', 'james.gunn@marvel.com', 'Director of Guardians of the Galaxy.'),
(11, 'Ryan Coogler', 'ryan.coogler@marvel.com', 'Director of Black Panther.'),
(12, 'Anna Boden, Ryan Fleck', 'boden.fleck@marvel.com', 'Co-directors of Captain Marvel.'),
(13, 'Sam Raimi', 'sam.raimi@marvel.com', 'Director of Doctor Strange: Multiverse of Madness.');


DROP TABLE IF EXISTS `movies`;
CREATE TABLE `movies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `movie_image` varchar(255) NOT NULL,
  `rating` decimal(2,1) NOT NULL,
  `release_date` date NOT NULL,
  `director_id` int NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`director_id`) REFERENCES `directors`(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

INSERT INTO `movies` (`id`, `title`, `description`, `movie_image`, `rating`, `release_date`, `director_id`) VALUES
(1, 'Iron Man', 'After being held captive in an Afghan cave, billionaire engineer Tony Stark creates a unique weaponized suit of armor to fight evil.', 'iron_man.webp', 7.9, '2008-05-01', 1),
(2, 'Iron Man 2', 'With the world now aware of his identity as Iron Man, Tony Stark faces pressure from the government, the press, and the public to share his technology with the military.', 'iron_man_2.webp', 6.9, '2010-05-01', 1),
(3, 'Thor', 'The powerful but arrogant god Thor is cast out of Asgard to live among humans in Midgard (Earth), where he soon becomes one of their finest defenders.', 'thor.webp', 7.0, '2011-05-01', 2),
(4, 'Captain America: The First Avenger', 'Steve Rogers, a rejected military soldier, transforms into Captain America after taking a dose of a "Super-Soldier serum." But being Captain America comes at a price as he attempts to take down a warmonger.', 'captain_america.webp', 6.9, '2011-07-01', 3),
(5, 'The Avengers', 'Earth''s mightiest heroes must come together and learn to fight as a team if they are going to stop the mischievous Loki and his alien army from enslaving humanity.', 'the_avengers.webp', 8.0, '2012-05-01', 4),
(6, 'Iron Man 3', 'When Tony Stark''s world is torn apart by a formidable terrorist called the Mandarin, he starts an odyssey of rebuilding and retribution.', 'iron_man_3.webp', 7.1, '2013-05-01', 8),
(7, 'Thor: The Dark World', 'Thor must unite with his estranged brother, Loki, to stop the dark elf Malekith from using an ancient weapon to plunge the universe back into darkness.', 'thor_the_dark_world.webp', 6.9, '2013-11-01', 9),
(8, 'Captain America: The Winter Soldier', 'As Steve Rogers struggles to embrace his role in the modern world, he teams up with a fellow Avenger and S.H.I.E.L.D agent, Black Widow, to battle a new threat from history: an assassin known as the Winter Soldier.', 'captain_america_2.webp', 7.7, '2014-04-01', 5),
(9, 'Guardians of the Galaxy', 'A group of intergalactic criminals must pull together to stop a fanatical warrior with plans to purge the universe.', 'guardians_of_the_galaxy.webp', 8.0, '2014-08-01', 10),
(10, 'Avengers: Age of Ultron', 'When Tony Stark and Bruce Banner try to jump-start a dormant peacekeeping program called Ultron, things go horribly wrong, and it''s up to Earth''s mightiest heroes to stop the villainous Ultron from enacting his terrible plan.', 'avengers_age_of_ultron.webp', 7.3, '2015-05-01', 4),
(11, 'Captain America: Civil War', 'Political involvement in the Avengers'' affairs causes a rift between Captain America and Iron Man.', 'captain_america_civil_war.webp', 7.8, '2016-05-01', 5),
(12, 'Doctor Strange', 'While on a journey of physical and spiritual healing, a brilliant neurosurgeon is drawn into the world of the mystic arts.', 'doctor_strange.webp', 7.5, '2016-11-01', 6),
(13, 'Spider-Man: Homecoming', 'Peter Parker balances his life as an ordinary high school student in Queens with his superhero alter-ego Spider-Man, and finds himself on the trail of a new menace prowling the skies of New York City.', 'spiderman_homecoming.webp', 7.4, '2017-07-01', 7),
(14, 'Black Panther', 'T''Challa, heir to the hidden but advanced kingdom of Wakanda, must step forward to lead his people into a new future and must confront a challenger from his country''s past.', 'black_panther.webp', 7.3, '2018-02-01', 11),
(15, 'Avengers: Infinity War', 'The Avengers and their allies must be willing to sacrifice all in an attempt to defeat the powerful Thanos before his blitz of devastation puts an end to the universe.', 'avengers_infinity_war.webp', 8.4, '2018-04-01', 5),
(16, 'Captain Marvel', 'Carol Danvers becomes one of the universe''s most powerful heroes when Earth is caught in the middle of a galactic war between two alien races.', 'captain_marvel.webp', 6.8, '2019-03-01', 12),
(17, 'Avengers: Endgame', 'After the devastating events of Infinity War, the remaining Avengers assemble once more in order to reverse Thanos'' actions and restore balance to the universe.', 'avengers_endgame.webp', 8.4, '2019-04-01', 5),
(18, 'Spider-Man: Far From Home', 'Following the events of Endgame, Spider-Man must step up to take on new threats in a world that has changed forever.', 'spiderman_far_from_home.webp', 7.4, '2019-07-01', 7),
(19, 'Spider-Man: No Way Home', 'With Spider-Man''s identity revealed, Peter turns to Doctor Strange for help, leading to a multiverse-shattering event that brings villains and heroes from other worlds.', 'spiderman_no_way_home.webp', 8.2, '2021-12-01', 7),
(20, 'Doctor Strange: Multiverse of Madness', 'Doctor Strange faces a new and powerful adversary as he journeys through the multiverse to protect a young girl with dimension-hopping powers.', 'doctor_strange_multiverse.webp', 6.9, '2022-05-01', 13);


DROP TABLE IF EXISTS `cast_members`;
CREATE TABLE `cast_members` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

INSERT INTO `cast_members` (`name`) VALUES
('Alfred Molina'),
('Anthony Hopkins'),
('Anthony Mackie'),
('Ben Mendelsohn'),
('Benedict Cumberbatch'),
('Benedict Wong'),
('Bradley Cooper'),
('Brie Larson'),
('Chadwick Boseman'),
('Chiwetel Ejiofor'),
('Chris Evans'),
('Chris Hemsworth'),
('Chris Pratt'),
('Christopher Eccleston'),
('Danai Gurira'),
('Dave Bautista'),
('Dominic Cooper'),
('Don Cheadle'),
('Elizabeth Olsen'),
('Guy Pearce'),
('Gwyneth Paltrow'),
('Hayley Atwell'),
('Hugo Weaving'),
('Idris Elba'),
('Jacob Batalon'),
('Jake Gyllenhaal'),
('Jeff Bridges'),
('Jeremy Renner'),
('Josh Brolin'),
('Jude Law'),
('Lashana Lynch'),
('Letitia Wright'),
('Lupita Nyongâ€™o'),
('Mark Ruffalo'),
('Michael B. Jordan'),
('Michael Keaton'),
('Mickey Rourke'),
('Natalie Portman'),
('Rachel McAdams'),
('Rebecca Hall'),
('Robert Downey Jr.'),
('Samuel L. Jackson'),
('Scarlett Johansson'),
('Sebastian Stan'),
('Shaun Toub'),
('Terrence Howard'),
('Tilda Swinton'),
('Tom Hiddleston'),
('Tom Holland'),
('Vin Diesel'),
('Xochitl Gomez'),
('Zendaya'),
('Zoe Saldana');


DROP TABLE IF EXISTS `movie_cast`;
CREATE TABLE `movie_cast` (
  `movie_id` int NOT NULL,
  `cast_member_id` int NOT NULL,
  PRIMARY KEY (`movie_id`, `cast_member_id`),
  FOREIGN KEY (`movie_id`) REFERENCES `movies`(`id`) ON DELETE CASCADE,
  FOREIGN KEY (`cast_member_id`) REFERENCES `cast_members`(`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

INSERT INTO `movie_cast` (`movie_id`, `cast_member_id`) VALUES
(1, 41),
(1, 21),
(1, 27),
(1, 46),
(1, 45),
(2, 41),
(2, 21),
(2, 18),
(2, 43),
(2, 37),
(3, 12),
(3, 48),
(3, 38),
(3, 2),
(3, 24),
(4, 11),
(4, 22),
(4, 44),
(4, 23),
(4, 17),
(5, 41),
(5, 11),
(5, 12),
(5, 34),
(5, 43),
(6, 41),
(6, 21),
(6, 18),
(6, 20),
(6, 40),
(7, 12),
(7, 38),
(7, 48),
(7, 14),
(7, 2),
(8, 11),
(8, 43),
(8, 3),
(8, 44),
(8, 42),
(9, 13),
(9, 53),
(9, 16),
(9, 7),
(9, 50),
(10, 41),
(10, 11),
(10, 12),
(10, 34),
(10, 19),
(11, 11),
(11, 41),
(11, 43),
(11, 44),
(11, 9),
(12, 5),
(12, 39),
(12, 10),
(12, 6),
(12, 47),
(13, 49),
(13, 41),
(13, 36),
(13, 52),
(13, 25),
(14, 9),
(14, 33),
(14, 15),
(14, 35),
(14, 32),
(15, 41),
(15, 11),
(15, 12),
(15, 29),
(15, 53),
(16, 8),
(16, 42),
(16, 30),
(16, 31),
(16, 4),
(17, 41),
(17, 11),
(17, 43),
(17, 34),
(17, 12),
(18, 49),
(18, 26),
(18, 52),
(18, 25),
(18, 42),
(19, 49),
(19, 52),
(19, 5),
(19, 25),
(19, 1),
(20, 5),
(20, 19),
(20, 51),
(20, 6),
(20, 39);


COMMIT;
